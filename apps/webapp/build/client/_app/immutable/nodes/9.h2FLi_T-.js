import"../chunks/disclose-version.bJ1TNjgf.js";import{p as ke,d as $,a as we,b as l,s as a,c as e,f as ye,g as s,t as M,h as Ce,e as ie,r as t}from"../chunks/runtime.-IAcHVGa.js";import{d as Re,s as R}from"../chunks/render.b8-zIhki.js";import{i as G}from"../chunks/if.rhLWI7XC.js";import{e as ne}from"../chunks/each.O8IpT50x.js";import{a as m,t as x,c as Ee}from"../chunks/template.2JA4nrVh.js";import{r as Be}from"../chunks/attributes.30sH_1mL.js";import{b as Fe}from"../chunks/input.-wl6lriZ.js";import{p as f}from"../chunks/proxy.-EQ_3oAC.js";import{o as Le}from"../chunks/index-client.CqCSz8ni.js";import{a as S}from"../chunks/index.8zbXj4bR.js";import{P as ce,S as de,T as le}from"../chunks/trash-2.BVg63cra.js";import{S as Se}from"../chunks/search.DkdCteOt.js";import{B as Te}from"../chunks/book.GEUNOCjM.js";import{C as Ae}from"../chunks/chevron-right.0fFRj5mE.js";async function Ie(g,n,i){const E={name:"New Cookbook",category:"General",restaurantId:1};try{if((await S.cookbook.createCookBook({body:E})).status===201)await n();else throw new Error("Failed to create cookbook")}catch(c){l(i,f(c.message))}}var Ne=x('<p class="mt-4 text-center text-gray-500">Loading cookbooks...</p>'),je=x('<p class="mt-4 text-center text-red-500"> </p>'),qe=(g,n,i)=>n(s(i)),De=(g,n,i)=>n(s(i)),Pe=(g,n,i)=>n(s(i).id),$e=x('<div class="overflow-hidden transition-shadow duration-200 bg-white rounded-lg shadow hover:shadow-md"><div class="px-4 py-5 sm:p-6"><div class="flex items-center"><div class="flex-shrink-0 p-3 bg-indigo-500 rounded-md"><!></div> <div class="ml-4"><h3 class="text-lg font-medium leading-6 text-gray-900"> </h3> <p class="mt-1 text-sm text-gray-500"> </p></div></div> <div class="mt-4"><p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center justify-between px-4 py-4 bg-gray-50 sm:px-6"><button class="flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-900 focus:outline-none">View Recipes <!></button> <div class="flex space-x-4"><button class="text-gray-500 hover:text-gray-700 focus:outline-none" title="Edit Cookbook"><!></button> <button class="text-red-500 hover:text-red-700 focus:outline-none" title="Delete Cookbook"><!></button></div></div></div>'),Ge=x('<div class="text-center text-gray-500 col-span-full">No cookbooks found.</div>'),Me=x('<div class="grid grid-cols-1 gap-6 mt-8 sm:grid-cols-2 lg:grid-cols-3"><!> <!></div>'),Ve=(g,n,i)=>n(s(i).id),ze=(g,n,i)=>n(s(i)),He=(g,n,i)=>n(s(i).id),Je=x('<li class="hover:bg-gray-50"><div class="flex items-center px-4 py-4 sm:px-6"><div class="flex-1 min-w-0"><div class="flex items-center"><p class="text-sm font-medium text-indigo-600 truncate"> </p></div> <div class="mt-2"><p class="text-sm text-gray-500"> </p></div></div> <div class="flex flex-shrink-0 ml-5 space-x-4"><button class="text-gray-500 hover:text-gray-700 focus:outline-none" title="Edit Recipe"><!></button> <button class="text-red-500 hover:text-red-700 focus:outline-none" title="Delete Recipe"><!></button></div></div></li>'),Ke=x('<li class="py-4 text-center text-gray-500">No recipes found in this cookbook.</li>'),Oe=x('<div class="mt-12"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between"><h2 class="mb-4 text-2xl font-bold text-gray-900 sm:mb-0"> </h2> <button class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><!> Add Recipe</button></div> <div class="mt-6 overflow-hidden bg-white shadow sm:rounded-md"><ul class="divide-y divide-gray-200"><!> <!></ul></div></div>'),Qe=x('<div class="px-4 mx-auto mt-8 max-w-7xl sm:px-6 lg:px-8"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between"><h1 class="mb-4 text-3xl font-bold text-gray-900 sm:mb-0">Cookbooks</h1> <button class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><!> Add Cookbook</button></div> <div class="mt-6"><div class="relative"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <input type="text" class="block w-full py-2 pl-10 pr-3 placeholder-gray-400 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Search cookbooks..."></div></div> <!> <!></div>');function lt(g,n){ke(n,!0);let i=$(f([])),E=$(""),c=$(null),V=$(!0),h=$(null);Le(async()=>{await z()});async function z(){try{l(V,!0);const o=await S.cookbook.getCookBooks({});if(o.status===200)l(i,f(o.body));else throw new Error("Failed to fetch cookbooks")}catch(o){l(h,f(o.message))}finally{l(V,!1)}}async function ve(o){console.log("Edit cookbook",o.id)}async function me(o){if(confirm("Are you sure you want to delete this cookbook?"))try{if((await S.cookbook.deleteCookBook({params:{id:o}})).status===200)await z();else throw new Error("Failed to delete cookbook")}catch(r){l(h,f(r.message))}}async function H(o){l(c,f(o));try{const r=await S.recipe.getRecipes({query:{cookBookId:o.id}});if(r.status===200)s(c).recipes=r.body;else throw new Error("Failed to fetch recipes")}catch(r){l(h,f(r.message))}}async function pe(o){const r={name:"New Recipe",description:"Recipe description",cookBookId:o,restaurantId:1,servings:1,prepTime:0,cookTime:0};try{if((await S.recipe.createRecipe({body:r})).status===201)await H(s(c));else throw new Error("Failed to create recipe")}catch(b){l(h,f(b.message))}}async function ue(o){console.log("Edit recipe",o.id)}async function _e(o){if(confirm("Are you sure you want to delete this recipe?"))try{if((await S.recipe.deleteRecipe({params:{id:o}})).status===200)await H(s(c));else throw new Error("Failed to delete recipe")}catch(r){l(h,f(r.message))}}let te=Ce(()=>s(i).filter(o=>o.name.toLowerCase().includes(s(E).toLowerCase())||o.category.toLowerCase().includes(s(E).toLowerCase())));var J=Qe(),K=e(J),O=a(e(K),2);O.__click=[Ie,z,h];var fe=e(O);ce(fe,{class:"w-5 h-5 mr-2"}),ie(),t(O),t(K);var Q=a(K,2),oe=e(Q),U=e(oe),xe=e(U);Se(xe,{class:"w-5 h-5 text-gray-400"}),t(U);var se=a(U,2);Be(se),t(oe),t(Q);var re=a(Q,2);G(re,()=>s(V),o=>{var r=Ne();m(o,r)},o=>{var r=Ee(),b=ye(r);G(b,()=>s(h),y=>{var p=je(),k=e(p,!0);t(p),M(()=>R(k,s(h))),m(y,p)},y=>{var p=Me(),k=e(p);ne(k,17,()=>s(te),w=>w.id,(w,d)=>{var B=$e(),T=e(B),u=e(T),v=e(u),A=e(v);Te(A,{class:"w-6 h-6 text-white"}),t(v);var I=a(v,2),C=e(I),N=e(C,!0);t(C);var j=a(C,2),X=e(j,!0);t(j),t(I),t(u);var q=a(u,2),D=e(q),Y=e(D);t(D),t(q),t(T);var P=a(T,2),_=e(P);_.__click=[qe,H,d];var Z=a(e(_));Ae(Z,{class:"w-5 h-5 ml-1"}),t(_);var F=a(_,2),L=e(F);L.__click=[De,ve,d];var he=e(L);de(he,{class:"w-5 h-5"}),t(L);var ee=a(L,2);ee.__click=[Pe,me,d];var be=e(ee);le(be,{class:"w-5 h-5"}),t(ee),t(F),t(P),t(B),M(()=>{var ae;R(N,s(d).name),R(X,s(d).category),R(Y,`${(((ae=s(d).recipes)==null?void 0:ae.length)||0)??""} recipes`)}),m(w,B)});var W=a(k,2);G(W,()=>s(te).length===0,w=>{var d=Ge();m(w,d)}),t(p),m(y,p)},!0),m(o,r)});var ge=a(re,2);G(ge,()=>s(c),o=>{var r=Oe(),b=e(r),y=e(b),p=e(y);t(y);var k=a(y,2);k.__click=[Ve,pe,c];var W=e(k);ce(W,{class:"w-5 h-5 mr-2"}),ie(),t(k),t(b);var w=a(b,2),d=e(w),B=e(d);ne(B,17,()=>s(c).recipes,u=>u.id,(u,v)=>{var A=Je(),I=e(A),C=e(I),N=e(C),j=e(N),X=e(j,!0);t(j),t(N);var q=a(N,2),D=e(q),Y=e(D,!0);t(D),t(q),t(C);var P=a(C,2),_=e(P);_.__click=[ze,ue,v];var Z=e(_);de(Z,{class:"w-5 h-5"}),t(_);var F=a(_,2);F.__click=[He,_e,v];var L=e(F);le(L,{class:"w-5 h-5"}),t(F),t(P),t(I),t(A),M(()=>{R(X,s(v).name),R(Y,s(v).description)}),m(u,A)});var T=a(B,2);G(T,()=>s(c).recipes.length===0,u=>{var v=Ke();m(u,v)}),t(d),t(w),t(r),M(()=>R(p,`${s(c).name??""} Recipes`)),m(o,r)}),t(J),Fe(se,()=>s(E),o=>l(E,o)),m(g,J),we()}Re(["click"]);export{lt as component};
