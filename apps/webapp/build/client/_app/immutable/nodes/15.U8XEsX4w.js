import"../chunks/disclose-version.bJ1TNjgf.js";import{f as ve,p as wt,d as X,a as It,b as u,c as s,r,s as i,g as o,t as ae,u as M,e as Ie,ab as kt,h as Ae}from"../chunks/runtime.-IAcHVGa.js";import{d as Mt,e as $t,s as j}from"../chunks/render.b8-zIhki.js";import{i as ne}from"../chunks/if.rhLWI7XC.js";import{e as Ke,i as gt}from"../chunks/each.O8IpT50x.js";import{c as me,a as x,t as P}from"../chunks/template.2JA4nrVh.js";import{r as W,d as jt,e as Tt,b as zt,c as Lt}from"../chunks/attributes.30sH_1mL.js";import{t as De,a as lt,f as Ct,s as Bt}from"../chunks/index.GZel0w3O.js";import{b as Y}from"../chunks/input.-wl6lriZ.js";import{b as Ut}from"../chunks/select.MzJQi75E.js";import{p as Et}from"../chunks/event-modifiers.159HUB1L.js";import{p as g}from"../chunks/proxy.-EQ_3oAC.js";import{s as Ft,a as Pt,b as ie}from"../chunks/store.AHA2i8fh.js";import{c as Ht,o as St}from"../chunks/index-client.CqCSz8ni.js";import{w as Je,d as ot,g as Jt}from"../chunks/index.AeigFpnP.js";import{a as se}from"../chunks/index.8zbXj4bR.js";import{l as Xe,s as Ge,p as bt}from"../chunks/props.99304sWr.js";import{r as Qe}from"../chunks/legacy-client.JRc2EHbh.js";import{X as Qt}from"../chunks/x.AuF4frLu.js";import{D as Se}from"../chunks/dollar-sign.P138Wjc8.js";import{s as We}from"../chunks/slot.OnpEubfz.js";import{I as Ye}from"../chunks/Icon.y-RLRpp5.js";import{P as _t,S as xt,T as dt}from"../chunks/trash-2.BVg63cra.js";import{S as Kt}from"../chunks/search.DkdCteOt.js";function Xt(n,e){const a=Xe(e,["children","$$slots","$$events","$$legacy"]);Ye(n,Ge({name:"arrow-left"},()=>a,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(h,y)=>{var f=me(),_=ve(f);We(_,e,"default",{},null),x(h,f)},$$slots:{default:!0}}))}function Gt(n,e){const a=Xe(e,["children","$$slots","$$events","$$legacy"]);Ye(n,Ge({name:"arrow-right"},()=>a,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],children:(h,y)=>{var f=me(),_=ve(f);We(_,e,"default",{},null),x(h,f)},$$slots:{default:!0}}))}function Wt(n,e){const a=Xe(e,["children","$$slots","$$events","$$legacy"]);Ye(n,Ge({name:"chevron-down"},()=>a,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:(h,y)=>{var f=me(),_=ve(f);We(_,e,"default",{},null),x(h,f)},$$slots:{default:!0}}))}function Yt(n,e){const a=Xe(e,["children","$$slots","$$events","$$legacy"]);Ye(n,Ge({name:"chevron-up"},()=>a,{iconNode:[["path",{d:"m18 15-6-6-6 6"}]],children:(h,y)=>{var f=me(),_=ve(f);We(_,e,"default",{},null),x(h,f)},$$slots:{default:!0}}))}function Zt(n,e){const a=Xe(e,["children","$$slots","$$events","$$legacy"]);Ye(n,Ge({name:"percent"},()=>a,{iconNode:[["line",{x1:"19",x2:"5",y1:"5",y2:"19"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5"}]],children:(h,y)=>{var f=me(),_=ve(f);We(_,e,"default",{},null),x(h,f)},$$slots:{default:!0}}))}var ht=Object.prototype.hasOwnProperty;function ct(n,e){var a,t;if(n===e)return!0;if(n&&e&&(a=n.constructor)===e.constructor){if(a===Date)return n.getTime()===e.getTime();if(a===RegExp)return n.toString()===e.toString();if(a===Array){if((t=n.length)===e.length)for(;t--&&ct(n[t],e[t]););return t===-1}if(!a||typeof n=="object"){t=0;for(a in n)if(ht.call(n,a)&&++t&&!ht.call(e,a)||!(a in e)||!ct(n[a],e[a]))return!1;return Object.keys(e).length===t}}return n!==n&&e!==e}function er(n){return new Promise(e=>{n.subscribe(e)()})}function tr(n,e,a){n.update(t=>(Nt(t,e,a),t))}function rr(n){return JSON.parse(JSON.stringify(n))}function mt(n){return n==null}function At(n){return mt(n)||Object.keys(n).length<=0}function Dt(n){let e=[];for(const[,a]of Object.entries(n)){const t=typeof a=="object"?Dt(a):[a];e=[...e,...t]}return e}function ut(n,e,a={}){for(const t in e)switch(!0){case(e[t].type==="object"&&!At(e[t].fields)):{a[t]=ut(n[t],e[t].fields,{...a[t]});break}case e[t].type==="array":{const h=n&&n[t]?n[t]:[];a[t]=h.map(y=>{const f=ut(y,e[t].innerType.fields,{...a[t]});return Object.keys(f).length>0?f:""});break}default:a[t]=""}return a}const sr=ct;function vt(n,e){if(Array.isArray(n))return n.map(t=>vt(t,e));const a={};for(const t in n)a[t]=typeof n[t]=="object"&&!mt(n[t])?vt(n[t],e):e;return a}function Nt(n,e,a){if(new Object(n)!==n)return n;Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]);const t=e.slice(0,-1).reduce((h,y,f)=>new Object(h[y])===h[y]?h[y]:h[y]=Math.trunc(Math.abs(e[f+1]))===+e[f+1]?[]:{},n);return t[e[e.length-1]]=a,n}const O={assignDeep:vt,cloneDeep:rr,deepEqual:sr,getErrorsFromSchema:ut,getValues:Dt,isEmpty:At,isNullish:mt,set:Nt,subscribeOnce:er,update:tr},yt="",nr=!0;function or(n){return n.getAttribute&&n.getAttribute("type")==="checkbox"}function ir(n){return n.getAttribute&&n.getAttribute("type")==="file"}function ar(n){return ir(n)?n.files:or(n)?n.checked:n.value}const qt=n=>{let e=n.initialValues||{};const a=n.validationSchema,t=n.validate,h=n.onSubmit,y={values:()=>O.cloneDeep(e),errors:()=>a?O.getErrorsFromSchema(e,a.fields):O.assignDeep(e,yt),touched:()=>O.assignDeep(e,!nr)},f=Je(y.values()),_=Je(y.errors()),T=Je(y.touched()),K=Je(!1),b=Je(!1),de=ot(_,v=>O.getValues(v).every(p=>p===yt)),E=ot(f,v=>{const c=O.assignDeep(v,!1);for(let p in v)c[p]=!O.deepEqual(v[p],e[p]);return c}),ke=ot(E,v=>O.getValues(v).includes(!0));function S(v){return O.subscribeOnce(f).then(c=>ue(v,c[v]))}function ue(v,c){return _e(v,!0),a?(b.set(!0),a.validateAt(v,Jt(f)).then(()=>O.update(_,v,"")).catch(p=>O.update(_,v,p.message)).finally(()=>{b.set(!1)})):t?(b.set(!0),Promise.resolve().then(()=>t({[v]:c})).then(p=>O.update(_,v,O.isNullish(p)?"":p[v])).finally(()=>{b.set(!1)})):Promise.resolve()}function Me(v,c){return $e(v,c),ue(v,c)}function ge(v){const c=v.target,p=c.name||c.id,Z=ar(c);return Me(p,Z)}function be(v){return v&&v.preventDefault&&v.preventDefault(),K.set(!0),O.subscribeOnce(f).then(c=>typeof t=="function"?(b.set(!0),Promise.resolve().then(()=>t(c)).then(p=>{if(O.isNullish(p)||O.getValues(p).length===0)return ee(c);_.set(p),K.set(!1)}).finally(()=>b.set(!1))):a?(b.set(!0),a.validate(c,{abortEarly:!1}).then(()=>ee(c)).catch(p=>{if(p&&p.inner){const Z=y.errors();p.inner.map(le=>O.set(Z,le.path,le.message)),_.set(Z)}K.set(!1)}).finally(()=>b.set(!1))):ee(c))}function fe(){f.set(y.values()),_.set(y.errors()),T.set(y.touched())}function ee(v){return Promise.resolve().then(()=>_.set(y.errors())).then(()=>h(v,f,_)).finally(()=>K.set(!1))}function $e(v,c){O.update(f,v,c)}function _e(v,c){O.update(T,v,c)}function Ne(v){e=v,fe()}return{form:f,errors:_,touched:T,modified:E,isValid:de,isSubmitting:K,isValidating:b,isModified:ke,handleChange:ge,handleSubmit:be,handleReset:fe,updateField:$e,updateValidateField:Me,updateTouched:_e,validateField:S,updateInitialValues:Ne,state:ot([f,_,T,E,de,b,K,ke],([v,c,p,Z,le,pe,qe,xe])=>({form:v,errors:c,touched:p,modified:Z,isValid:le,isSubmitting:qe,isValidating:pe,isModified:xe}))}};function dr(n,e,a){o(e)<a&&kt(e)}function lr(n,e){o(e)>1&&kt(e,-1)}var cr=(n,e,a)=>e(o(a).id),ur=P('<label class="flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100"><input type="checkbox" class="w-4 h-4 text-indigo-600 border-gray-300 rounded form-checkbox"> <span class="ml-2 text-sm text-gray-700"> </span></label>'),vr=P('<div class="px-3 py-2 text-sm text-gray-500">No recipes found.</div>'),mr=P('<div><div><label for="name" class="block text-sm font-medium text-gray-700">Name <span class="text-red-500">*</span></label> <input type="text" id="name" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required placeholder="Enter menu item name"></div> <div class="mt-4"><label for="description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="description" rows="3" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Enter description"></textarea></div> <div class="mt-4"><label for="recipe-search" class="block text-sm font-medium text-gray-700">Select Recipes <span class="text-red-500">*</span></label> <div class="mt-2"><input type="text" class="block w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Search recipes..."> <div class="overflow-y-auto border border-gray-300 rounded-md max-h-60"><!> <!></div></div></div></div>'),fr=P('<div><div class="grid grid-cols-2 gap-6"><div><label for="price" class="block text-sm font-medium text-gray-700">Price ($) <span class="text-red-500">*</span></label> <div class="relative mt-1 rounded-md shadow-sm"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <input type="number" id="price" step="0.01" min="0" class="block w-full pl-10 pr-12 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required placeholder="0.00"></div></div> <div><label for="foodCost" class="block text-sm font-medium text-gray-700">Food Cost ($) <span class="text-red-500">*</span></label> <div class="relative mt-1 rounded-md shadow-sm"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <input id="foodCost" step="0.01" min="0" class="block w-full pl-10 pr-12 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required></div></div></div></div>'),pr=P('<div><div class="grid grid-cols-2 gap-6"><div><label for="price" class="block text-sm font-medium text-gray-700">Price ($) <span class="text-red-500">*</span></label> <div class="relative mt-1 rounded-md shadow-sm"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <input type="number" id="price" step="0.01" min="0" class="block w-full pl-10 pr-12 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required placeholder="0.00"></div></div> <div><label for="foodCost" class="block text-sm font-medium text-gray-700">Food Cost ($) <span class="text-red-500">*</span></label> <div class="relative mt-1 rounded-md shadow-sm"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <input type="number" id="foodCost" step="0.01" min="0" class="block w-full pl-10 pr-12 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required placeholder="0.00"></div></div></div> <div class="p-4 mt-4 rounded-md bg-gray-50"><h4 class="mb-2 text-sm font-medium text-gray-700">Pricing Information</h4> <div class="flex items-center text-sm text-gray-600"><!> <span> </span></div> <div class="flex items-center mt-1 text-sm text-gray-600"><!> <span> </span></div> <div class="flex items-center mt-1 text-sm text-gray-600"><!> <span> </span></div></div> <div class="mt-4"><label for="quantity" class="block text-sm font-medium text-gray-700">Quantity <span class="text-red-500">*</span></label> <input type="number" id="quantity" min="1" class="block w-full px-3 py-2 mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required placeholder="1"></div></div>'),gr=P('<div><div class="mb-4"><label for="allergens" class="block text-sm font-medium text-gray-700">Allergens</label> <input type="text" id="allergens" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="e.g., Nuts, Dairy"></div> <div><h4 class="block mb-2 text-sm font-medium text-gray-700">Nutritional Information</h4> <div class="grid grid-cols-2 gap-6"><div><label for="calories" class="block text-sm font-medium text-gray-700">Calories</label> <input type="number" id="calories" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="0"></div> <div><label for="protein" class="block text-sm font-medium text-gray-700">Protein (g)</label> <input type="number" id="protein" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="0"></div> <div><label for="carbs" class="block text-sm font-medium text-gray-700">Carbs (g)</label> <input type="number" id="carbs" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="0"></div> <div><label for="fat" class="block text-sm font-medium text-gray-700">Fat (g)</label> <input type="number" id="fat" class="block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="0"></div></div></div></div>'),br=P('<button type="button" class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"><!> Previous</button>'),_r=P("<div></div>"),xr=P('<button type="button" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Next <!></button>'),hr=P('<button type="submit" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"> </button>'),yr=P('<div class="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black bg-opacity-50" aria-labelledby="modal-title" role="dialog" aria-modal="true"><div class="relative w-full max-w-2xl p-6 mx-4 bg-white rounded-lg shadow-xl sm:mx-auto"><div class="flex items-center justify-between mb-4"><h3 class="text-xl font-semibold text-gray-900" id="modal-title"> </h3> <button class="p-1 text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"><span class="sr-only">Close</span> <!></button></div> <div class="mb-6"><div class="flex items-center justify-between text-sm font-medium text-gray-700"><span> </span> <span> </span></div> <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2"><div class="bg-indigo-600 h-2.5 rounded-full"></div></div></div> <form class="space-y-6"><!> <div class="flex justify-between mt-6"><!> <!></div></form></div></div>');function wr(n,e){var v;wt(e,!0);const a=Ft(),t=()=>Pt(E,"$form",a);let h=bt(e,"showModal",15),y=bt(e,"recipes",19,()=>[]);const f=Ht();let _=X(0),T=X(0);Qe(()=>{var c;console.log((c=e.editingMenuItem)==null?void 0:c.id)});const K={name:"",description:"",price:0,foodCost:0,menuId:((v=e.selectedMenu)==null?void 0:v.id)||0,recipeIds:[],quantity:1,allergens:[],nutritionalInfo:{calories:0,protein:0,carbs:0,fat:0}};let b=X(1);const de=4,{form:E,handleSubmit:ke}=qt({initialValues:K,onSubmit:async c=>{const p={...c,recipeIds:c.recipeIds.length?c.recipeIds:[],nutritionalInfo:c.nutritionalInfo};f("submit",p),S()}});Qe(()=>{var c,p;e.editingMenuItem&&E.set({name:e.editingMenuItem.name||"",description:e.editingMenuItem.description||"",price:e.editingMenuItem.price||0,foodCost:e.editingMenuItem.foodCost||0,menuId:e.editingMenuItem.menuId||((c=e.selectedMenu)==null?void 0:c.id)||0,recipeIds:((p=e.editingMenuItem.menuItemRecipes)==null?void 0:p.map(Z=>Z.recipeId))||[],quantity:e.editingMenuItem.quantity||1,allergens:e.editingMenuItem.allergens||[],nutritionalInfo:e.editingMenuItem.nutritionalInfo||{calories:0,protein:0,carbs:0,fat:0}})});function S(){var c;h(!1),f("close"),u(b,1),E.set({name:"",description:"",price:0,foodCost:0,menuId:((c=e.selectedMenu)==null?void 0:c.id)||0,recipeIds:[],quantity:1,allergens:[],nutritionalInfo:{calories:0,protein:0,carbs:0,fat:0}})}let ue=Ae(()=>t().price>0&&t().foodCost>0?(t().foodCost/t().price*100).toFixed(2):"0.00"),Me=Ae(()=>t().foodCost>0?(t().foodCost/.28).toFixed(2):"0.00");Qe(()=>{u(_,g(t().foodCost===0?2:t().foodCost))}),Qe(()=>{u(T,g(t().price===0?2:t().price))});let ge=Ae(()=>t().foodCost>0?(t().foodCost*1.5).toFixed(2):"0.00"),be=X(""),fe=X(g(y())),ee=X(g(t().recipeIds));Qe(()=>{u(fe,g(y().filter(c=>c.name.toLowerCase().includes(o(be).toLowerCase()))))});function $e(c){o(ee).includes(c)?u(ee,g(o(ee).filter(p=>p!==c))):u(ee,g([...o(ee),c])),E.set({...t(),recipeIds:o(ee)})}St(()=>{function c(p){p.key==="Escape"&&S()}return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)});var _e=me(),Ne=ve(_e);ne(Ne,h,c=>{var p=yr(),Z=s(p),le=s(Z),pe=s(le),qe=s(pe,!0);r(pe);var xe=i(pe,2);xe.__click=S;var it=i(s(xe),2);Qt(it,{class:"w-6 h-6","aria-hidden":"true"}),r(xe),r(le);var Ce=i(le,2),he=s(Ce),ye=s(he),Re=s(ye);r(ye);var Ze=i(ye,2),Oe=s(Ze,!0);r(Ze),r(he);var Ve=i(he,2),je=s(Ve);r(Ve),r(Ce);var Te=i(Ce,2),et=Ae(()=>Et(ke)),ze=s(Te);ne(ze,()=>o(b)===1,l=>{var m=mr(),F=s(m),z=i(s(F),2);W(z),r(F);var w=i(F,2),L=i(s(w),2);jt(L),r(w);var B=i(w,2),U=i(s(B),2),A=s(U);W(A);var H=i(A,2),D=s(H);Ke(D,17,()=>o(fe),I=>I.id,(I,k)=>{var J=ur(),q=s(J);W(q),ae(()=>Tt(q,o(ee).includes(o(k).id))),q.__change=[cr,$e,k];var $=i(q,2),G=s($,!0);r($),r(J),ae(()=>{zt(q,o(k).id),j(G,o(k).name)}),x(I,J)});var N=i(D,2);ne(N,()=>o(fe).length===0,I=>{var k=vr();x(I,k)}),r(H),r(U),r(B),r(m),Y(z,()=>t().name,I=>ie(E,M(t).name=I,M(t))),Y(L,()=>t().description,I=>ie(E,M(t).description=I,M(t))),Y(A,()=>o(be),I=>u(be,I)),x(l,m)},l=>{var m=me(),F=ve(m);ne(F,()=>o(b)===2,z=>{var w=fr(),L=s(w),B=s(L),U=i(s(B),2),A=s(U),H=s(A);Se(H,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"}),r(A);var D=i(A,2);W(D),r(U),r(B);var N=i(B,2),I=i(s(N),2),k=s(I),J=s(k);Se(J,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"}),r(k);var q=i(k,2);W(q),r(I),r(N),r(L),r(w),Y(D,()=>o(T),$=>u(T,$)),Y(q,()=>o(_),$=>u(_,$)),x(z,w)},z=>{var w=me(),L=ve(w);ne(L,()=>o(b)===3,B=>{var U=pr(),A=s(U),H=s(A),D=i(s(H),2),N=s(D),I=s(N);Se(I,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"}),r(N);var k=i(N,2);W(k),r(D),r(H);var J=i(H,2),q=i(s(J),2),$=s(q),G=s($);Se(G,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"}),r($);var oe=i($,2);W(oe),r(q),r(J),r(A);var te=i(A,2),V=i(s(te),2),R=s(V);Zt(R,{class:"w-5 h-5 mr-2 text-gray-400"});var Q=i(R,2),C=s(Q);r(Q),r(V);var re=i(V,2),ce=s(re);Se(ce,{class:"w-5 h-5 mr-2 text-gray-400"});var Ee=i(ce,2),Be=s(Ee);r(Ee),r(re);var Fe=i(re,2),rt=s(Fe);Se(rt,{class:"w-5 h-5 mr-2 text-gray-400"});var Pe=i(rt,2),Ue=s(Pe);r(Pe),r(Fe),r(te);var st=i(te,2),He=i(s(st),2);W(He),r(st),r(U),ae(()=>{j(C,`Food Cost Percentage: ${o(ue)??""}%`),j(Be,`Suggested Price: $${o(Me)??""}`),j(Ue,`Break-even Price: $${o(ge)??""}`)}),Y(k,()=>t().price,we=>ie(E,M(t).price=we,M(t))),Y(oe,()=>t().foodCost,we=>ie(E,M(t).foodCost=we,M(t))),Y(He,()=>t().quantity,we=>ie(E,M(t).quantity=we,M(t))),x(B,U)},B=>{var U=me(),A=ve(U);ne(A,()=>o(b)===4,H=>{var D=gr(),N=s(D),I=i(s(N),2);W(I),r(N);var k=i(N,2),J=i(s(k),2),q=s(J),$=i(s(q),2);W($),r(q);var G=i(q,2),oe=i(s(G),2);W(oe),r(G);var te=i(G,2),V=i(s(te),2);W(V),r(te);var R=i(te,2),Q=i(s(R),2);W(Q),r(R),r(J),r(k),r(D),Y(I,()=>t().allergens,C=>ie(E,M(t).allergens=C,M(t))),Y($,()=>t().nutritionalInfo.calories,C=>ie(E,M(t).nutritionalInfo.calories=C,M(t))),Y(oe,()=>t().nutritionalInfo.protein,C=>ie(E,M(t).nutritionalInfo.protein=C,M(t))),Y(V,()=>t().nutritionalInfo.carbs,C=>ie(E,M(t).nutritionalInfo.carbs=C,M(t))),Y(Q,()=>t().nutritionalInfo.fat,C=>ie(E,M(t).nutritionalInfo.fat=C,M(t))),De(3,D,()=>lt),x(H,D)},null,!0),x(B,U)},!0),x(z,w)},!0),x(l,m)});var Le=i(ze,2),tt=s(Le);ne(tt,()=>o(b)>1,l=>{var m=br();m.__click=[lr,b];var F=s(m);Xt(F,{class:"w-5 h-5 mr-2"}),Ie(),r(m),x(l,m)},l=>{var m=_r();x(l,m)});var d=i(tt,2);ne(d,()=>o(b)<de,l=>{var m=xr();m.__click=[dr,b,de];var F=i(s(m));Gt(F,{class:"w-5 h-5 ml-2"}),r(m),x(l,m)},l=>{var m=hr(),F=s(m,!0);r(m),ae(()=>j(F,e.editingMenuItem?"Update Menu Item":"Create Menu Item")),x(l,m)}),r(Le),r(Te),r(Z),r(p),ae(()=>{j(qe,e.editingMenuItem?"Edit Menu Item":"Add New Menu Item"),j(Re,`Step ${o(b)??""} of ${de}`),j(Oe,["Basic Info","Pricing","Additional Details"][o(b)-1]),Lt(je,"style",`width: ${o(b)/de*100}%; transition: width 0.3s ease-in-out;`)}),$t("submit",Te,function(...l){var m;(m=o(et))==null||m.apply(this,l)}),De(3,Z,()=>Ct,()=>({y:20,duration:300})),De(3,p,()=>lt,()=>({duration:200})),x(c,p)}),x(n,_e),It()}Mt(["click","change"]);var Ir=(n,e)=>e(),kr=(n,e,a)=>e(o(a)),Mr=(n,e,a)=>e(o(a)),$r=(n,e,a)=>e(o(a).id),Cr=(n,e,a)=>e(o(a)),Er=(n,e,a,t)=>e(o(a),o(t)),Fr=(n,e,a,t)=>e(o(a).id,o(t).id),Pr=P(`<li class="flex flex-col p-4 bg-white rounded-lg shadow-sm sm:flex-row sm:items-center sm:justify-between svelte-sv01e3"><div class="flex-1 svelte-sv01e3"><h4 class="font-semibold text-gray-800 text-md svelte-sv01e3"> </h4> <p class="mt-1 text-sm text-gray-600 svelte-sv01e3">Price: <span class="text-indigo-600 svelte-sv01e3"> </span> | Food
												Cost: <span class="text-red-600 svelte-sv01e3"> </span></p> <p class="mt-1 text-sm text-gray-600 svelte-sv01e3"> </p></div> <div class="flex mt-4 space-x-3 sm:mt-0 svelte-sv01e3"><button class="inline-flex items-center px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-100 rounded-md hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3"><!> Edit</button> <button class="inline-flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-100 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500 svelte-sv01e3"><!> Delete</button></div></li>`),Sr=P('<ul class="space-y-4 svelte-sv01e3"></ul>'),Ar=P('<p class="mt-4 text-sm text-gray-500 svelte-sv01e3">No menu items found.</p>'),Dr=P('<div class="px-6 pb-6 bg-gray-50 svelte-sv01e3"><div class="flex items-center justify-between mb-4 svelte-sv01e3"><h3 class="text-lg font-medium text-gray-900 svelte-sv01e3">Menu Items</h3> <button class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3"><!> Add Item</button></div> <!></div>'),Nr=P('<div class="flex flex-col transition-shadow duration-300 bg-white rounded-lg shadow-md hover:shadow-lg svelte-sv01e3"><div class="flex items-center justify-between px-6 py-5 svelte-sv01e3"><div class="flex items-center svelte-sv01e3"><button class="text-gray-400 hover:text-gray-500 focus:outline-none svelte-sv01e3"><!></button> <h2 class="ml-4 text-xl font-semibold text-indigo-600 truncate svelte-sv01e3"> </h2></div> <div class="flex space-x-3 svelte-sv01e3"><button class="inline-flex items-center px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-100 rounded-md hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3"><!> Edit</button> <button class="inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-red-100 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500 svelte-sv01e3"><!> Delete</button></div></div> <p class="px-6 pb-5 text-sm text-gray-500 svelte-sv01e3"> </p> <!></div>'),qr=(n,e,a)=>{u(e,!1),u(a,null)},Rr=P('<p class="text-sm text-red-600 svelte-sv01e3"> </p>'),Or=P('<div class="mb-6 svelte-sv01e3"></div>'),Vr=P('<option class="svelte-sv01e3"> </option>'),jr=(n,e,a)=>{u(e,!1),u(a,null)},Tr=P('<div class="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black bg-opacity-50 svelte-sv01e3" role="dialog" aria-modal="true"><div class="w-full max-w-lg p-8 bg-white rounded-lg shadow-xl sm:mx-auto svelte-sv01e3"><div class="flex items-center justify-between mb-6 svelte-sv01e3"><h3 class="text-xl font-semibold text-gray-900 svelte-sv01e3"> </h3> <button class="p-2 text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3"><!></button></div> <!> <form class="space-y-6 svelte-sv01e3"><div class="svelte-sv01e3"><label for="name" class="block text-sm font-medium text-gray-700 svelte-sv01e3">Menu Name</label> <input type="text" id="name" required class="block w-full px-4 py-3 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 svelte-sv01e3" placeholder="Enter menu name"></div> <div class="svelte-sv01e3"><label for="restaurantId" class="block text-sm font-medium text-gray-700 svelte-sv01e3">Restaurant</label> <select id="restaurantId" required class="block w-full px-4 py-3 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 svelte-sv01e3"><option class="svelte-sv01e3">Select a restaurant</option><!></select></div> <div class="flex justify-end space-x-4 svelte-sv01e3"><button type="button" class="px-5 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3">Cancel</button> <button type="submit" class="inline-flex items-center px-5 py-3 text-sm font-medium text-white bg-indigo-600 rounded-lg shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-sv01e3"> </button></div></form></div></div>'),zr=P('<div class="px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8 svelte-sv01e3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between svelte-sv01e3"><h1 class="text-3xl font-extrabold text-gray-900 svelte-sv01e3">Menu Management</h1> <button class="inline-flex items-center px-5 py-3 mt-4 text-sm font-semibold text-white bg-indigo-600 rounded-lg shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:mt-0 svelte-sv01e3"><!> Add Menu</button></div> <div class="mt-6 svelte-sv01e3"><div class="relative svelte-sv01e3"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none svelte-sv01e3"><!></div> <input type="text" class="block w-full py-3 pl-10 pr-4 leading-5 text-gray-700 placeholder-gray-400 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm svelte-sv01e3" placeholder="Search menus by name..."></div></div> <div class="grid items-start gap-8 mt-8 lg:grid-cols-2 xl:grid-cols-3 svelte-sv01e3"></div></div> <!> <!>',1);function vs(n,e){wt(e,!0);const a=Ft(),t=()=>Pt(ue,"$menuForm",a);let h=X(g([])),y=X(""),f=X(!1),_=X(!1),T=X(null),K=X(null),b=X(g({id:0,name:"",restaurantId:0,createdAt:new Date,updatedAt:new Date,menuItems:null,expanded:!1})),de=X(g([])),E=X(g([])),ke=[],S=X(g([]));const{form:ue,handleSubmit:Me}=qt({initialValues:{name:"",restaurantId:"",createdAt:new Date,updatedAt:new Date},onSubmit:async d=>{try{o(T)?await _e(o(T).id,d):await $e(d),u(f,!1),u(T,null),await ge()}catch(l){console.error("Failed to save menu:",l),u(S,g([l.message||"Failed to save menu"]))}}});St(async()=>{await fe(),await ee(),await be(),await ge()});async function ge(){try{const d=await se.menu.getMenus({});u(h,g(d.body.map(l=>({...l,expanded:!1,menuItems:null}))))}catch(d){console.error("Error fetching menus:",d),u(S,g(["Failed to fetch menus"]))}}async function be(){try{const d=await se.recipe.getRecipes({});u(de,g(d.body))}catch(d){console.error("Error fetching recipes:",d),u(S,g(["Failed to fetch recipes"]))}}async function fe(){try{const d=await se.restaurant.getRestaurants({});u(E,g(d.body))}catch(d){console.error("Error fetching restaurants:",d),u(S,g(["Failed to fetch restaurants"]))}}async function ee(){try{ke=(await se.cookbook.getCookBooks({})).body}catch(d){console.error("Error fetching cookbooks:",d),u(S,g(["Failed to fetch cookbooks"]))}}async function $e(d){try{await se.menu.createMenu({body:d})}catch(l){throw console.error("Error creating menu:",l),u(S,g(["Failed to create menu"])),l}}async function _e(d,l){try{await se.menu.updateMenu({params:{id:d},body:l})}catch(m){throw console.error("Error updating menu:",m),u(S,g(["Failed to update menu"])),m}}async function Ne(d){if(confirm("Are you sure you want to delete this menu?"))try{await se.menu.deleteMenu({params:{id:d}}),await ge()}catch(l){console.error("Error deleting menu:",l),u(S,g(["Failed to delete menu"]))}}async function v(d){try{const m=(await se.menuItem.getMenuItems({query:{menuId:d}})).body,F=await Promise.all(m.map(async w=>{try{const[L,B]=await Promise.all([se.menuItem.calculateMenuItemFoodCostPercentage({params:{menuItemId:w.id}}),se.menuItem.calculateMenuItemPrice({params:{menuItemId:w.id}})]);return{...w,foodCostPercentage:Number(L.body||0),suggestedPrice:Number(B.body||0)}}catch(L){return console.error(`Error fetching data for menu item ${w.id}:`,L),{...w,foodCostPercentage:0,suggestedPrice:0}}})),z=o(h).find(w=>w.id===d);z&&(z.menuItems=F,u(h,g([...o(h)])))}catch(l){console.error("Error fetching menu items:",l),u(S,g(["Failed to fetch menu items"]))}}async function c(d){try{await se.menuItem.createMenuItem({body:d})}catch(l){throw console.error("Error creating menu item:",l),u(S,g(["Failed to create menu item"])),l}}async function p(d,l){try{await se.menuItem.updateMenuItem({params:{id:d},body:l})}catch(m){throw console.error("Error updating menu item:",m),u(S,g(["Failed to update menu item"])),m}}async function Z(d,l){if(confirm("Are you sure you want to delete this menu item?"))try{await se.menuItem.deleteMenuItem({params:{id:l}}),await v(d)}catch(m){console.error("Error deleting menu item:",m),u(S,g(["Failed to delete menu item"]))}}function le(d=null){u(T,g(d)),d?ue.set({name:d.name,restaurantId:d.restaurantId,createdAt:d.createdAt,updatedAt:d.updatedAt,menuItems:d.menuItems,expanded:d.expanded}):ue.set({name:"",restaurantId:0,createdAt:new Date,updatedAt:new Date,menuItems:null,expanded:!1}),u(f,!0)}function pe(d,l=null){u(b,g(d)),u(K,g(l)),u(_,!0)}async function qe(d){console.log(`Toggling menu ID: ${d.id}`),d.menuItems||await v(d.id),u(h,g(o(h).map(l=>l.id===d.id?(console.log(`Menu ID ${l.id} expanded: ${!l.expanded}`),{...l,expanded:!l.expanded}):l)))}async function xe(d){const l=d.detail;try{o(K)&&o(b)?await p(o(K).id,{...l,menuId:o(b).id}):o(b)&&await c({...l,menuId:o(b).id}),u(_,!1),u(K,null),o(b)&&await v(o(b).id)}catch{}}let it=Ae(()=>o(h).filter(d=>d.name.toLowerCase().includes(o(y).toLowerCase())));var Ce=zr(),he=ve(Ce),ye=s(he),Re=i(s(ye),2);Re.__click=[Ir,le];var Ze=s(Re);_t(Ze,{class:"w-5 h-5 mr-2"}),Ie(),r(Re),r(ye);var Oe=i(ye,2),Ve=s(Oe),je=s(Ve),Te=s(je);Kt(Te,{class:"w-5 h-5 text-gray-400"}),r(je);var et=i(je,2);W(et),r(Ve),r(Oe);var ze=i(Oe,2);Ke(ze,21,()=>o(it),d=>d.id,(d,l)=>{var m=Nr(),F=s(m),z=s(F),w=s(z);w.__click=[kr,qe,l];var L=s(w);ne(L,()=>o(l).expanded,$=>{Yt($,{class:"w-6 h-6"})},$=>{Wt($,{class:"w-6 h-6"})}),r(w);var B=i(w,2),U=s(B,!0);r(B),r(z);var A=i(z,2),H=s(A);H.__click=[Mr,le,l];var D=s(H);xt(D,{class:"w-4 h-4 mr-2"}),Ie(),r(H);var N=i(H,2);N.__click=[$r,Ne,l];var I=s(N);dt(I,{class:"w-4 h-4 mr-2"}),Ie(),r(N),r(A),r(F);var k=i(F,2),J=s(k);r(k);var q=i(k,2);ne(q,()=>o(l).expanded,$=>{var G=Dr(),oe=s(G),te=i(s(oe),2);te.__click=[Cr,pe,l];var V=s(te);_t(V,{class:"w-4 h-4 mr-2"}),Ie(),r(te),r(oe);var R=i(oe,2);ne(R,()=>o(l).menuItems&&o(l).menuItems.length>0,Q=>{var C=Sr();Ke(C,21,()=>o(l).menuItems,re=>re.id,(re,ce)=>{var Ee=Pr(),Be=s(Ee),Fe=s(Be),rt=s(Fe,!0);r(Fe);var Pe=i(Fe,2),Ue=i(s(Pe)),st=s(Ue);ae(()=>j(st,`$${o(ce).price.toFixed(2)??""}`)),r(Ue);var He=i(Ue,2),we=s(He);ae(()=>j(we,`$${o(ce).foodCost.toFixed(2)??""}`)),r(He),r(Pe);var ft=i(Pe,2),Rt=s(ft,!0);r(ft),r(Be);var pt=i(Be,2),nt=s(pt);nt.__click=[Er,pe,l,ce];var Ot=s(nt);xt(Ot,{class:"w-4 h-4 mr-1"}),Ie(),r(nt);var at=i(nt,2);at.__click=[Fr,Z,l,ce];var Vt=s(at);dt(Vt,{class:"w-4 h-4 mr-1"}),Ie(),r(at),r(pt),r(Ee),ae(()=>{j(rt,o(ce).name),j(Rt,o(ce).description||"No description provided.")}),x(re,Ee)}),r(C),x(Q,C)},Q=>{var C=Ar();x(Q,C)}),r(G),De(3,G,()=>Bt,()=>({duration:300})),x($,G)}),r(m),ae(()=>{j(U,o(l).name),j(J,`Restaurant: ${o(l).name??""}`)}),x(d,m)}),r(ze),r(he);var Le=i(he,2);wr(Le,{get showModal(){return o(_)},set showModal(d){u(_,g(d))},get editingMenuItem(){return o(K)},set editingMenuItem(d){u(K,g(d))},get recipes(){return o(de)},set recipes(d){u(de,g(d))},get selectedMenu(){return o(b)},set selectedMenu(d){u(b,g(d))},$$events:{submit:xe,close:()=>{u(_,!1),u(K,null)}}});var tt=i(Le,2);ne(tt,()=>o(f),d=>{var l=Tr(),m=s(l),F=s(m),z=s(F),w=s(z,!0);r(z);var L=i(z,2);L.__click=[qr,f,T];var B=s(L);dt(B,{class:"w-6 h-6","aria-hidden":"true"}),r(L),r(F);var U=i(F,2);ne(U,()=>o(S).length>0,V=>{var R=Or();Ke(R,21,()=>o(S),gt,(Q,C)=>{var re=Rr(),ce=s(re,!0);r(re),ae(()=>j(ce,o(C))),x(Q,re)}),r(R),x(V,R)});var A=i(U,2),H=Ae(()=>Et(Me)),D=s(A),N=i(s(D),2);W(N),r(D);var I=i(D,2),k=i(s(I),2),J=s(k);J.value=((J.__value="")==null,"");var q=i(J);Ke(q,17,()=>o(E),gt,(V,R)=>{var Q=Vr(),C={},re=s(Q,!0);r(Q),ae(()=>{C!==(C=o(R).id)&&(Q.value=(Q.__value=o(R).id)==null?"":o(R).id),j(re,o(R).name)}),x(V,Q)}),r(k),r(I);var $=i(I,2),G=s($);G.__click=[jr,f,T];var oe=i(G,2),te=s(oe,!0);r(oe),r($),r(A),r(m),r(l),ae(()=>{j(w,o(T)?"Edit Menu":"Add New Menu"),j(te,o(T)?"Update Menu":"Create Menu")}),$t("submit",A,function(...V){var R;(R=o(H))==null||R.apply(this,V)}),Y(N,()=>t().name,V=>ie(ue,M(t).name=V,M(t))),Ut(k,()=>t().restaurantId,V=>ie(ue,M(t).restaurantId=V,M(t))),De(3,m,()=>Ct,()=>({y:20,duration:300})),De(3,l,()=>lt,()=>({duration:200})),x(d,l)}),Y(et,()=>o(y),d=>u(y,d)),x(n,Ce),It()}Mt(["click"]);export{vs as component};
