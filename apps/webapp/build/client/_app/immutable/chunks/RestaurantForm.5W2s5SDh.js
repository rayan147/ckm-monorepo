import"./disclose-version.bJ1TNjgf.js";import{p as L,d as y,c as o,s as l,r as n,t as M,g as i,b as w,a as U,h as B}from"./runtime.-IAcHVGa.js";import{d as G,e as H,s as I}from"./render.b8-zIhki.js";import{a as K,t as Q}from"./template.2JA4nrVh.js";import{r as x}from"./attributes.30sH_1mL.js";import{b as _}from"./input.-wl6lriZ.js";import{p as k}from"./proxy.-EQ_3oAC.js";import{p as V}from"./event-modifiers.159HUB1L.js";import{p as W}from"./props.99304sWr.js";import{c as X}from"./index-client.CqCSz8ni.js";import{w as Y}from"./index.AeigFpnP.js";function Z(){const{subscribe:u,set:m,update:t}=Y({restaurants:[],loading:!1,error:null});return{subscribe:u,fetchRestaurants:async()=>{t(r=>({...r,loading:!0,error:null}));try{const r=await fetch("/api/restaurants");if(!r.ok)throw new Error("Failed to fetch restaurants");const e=await r.json();t(a=>({...a,restaurants:e,loading:!1}))}catch(r){t(e=>({...e,error:r.message,loading:!1}))}},addRestaurant:async r=>{t(e=>({...e,loading:!0,error:null}));try{const e=await fetch("/api/restaurants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw new Error("Failed to add restaurant");const a=await e.json();t(s=>({...s,restaurants:[...s.restaurants,a],loading:!1}))}catch(e){t(a=>({...a,error:e.message,loading:!1}))}},updateRestaurant:async r=>{t(e=>({...e,loading:!0,error:null}));try{const e=await fetch(`/api/restaurants/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw new Error("Failed to update restaurant");const a=await e.json();t(s=>({...s,restaurants:s.restaurants.map(c=>c.id===a.id?a:c),loading:!1}))}catch(e){t(a=>({...a,error:e.message,loading:!1}))}},deleteRestaurant:async r=>{t(e=>({...e,loading:!0,error:null}));try{if(!(await fetch(`/api/restaurants/${r}`,{method:"DELETE"})).ok)throw new Error("Failed to delete restaurant");t(a=>({...a,restaurants:a.restaurants.filter(s=>s.id!==r),loading:!1}))}catch(e){t(a=>({...a,error:e.message,loading:!1}))}}}}const A=Z();var $=(u,m)=>m("close"),ee=Q('<div class="fixed inset-0 z-10 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true"><div class="flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"><div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div> <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span> <div class="inline-block px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"><div><h3 class="text-lg font-medium leading-6 text-gray-900" id="modal-title"> </h3> <form class="mt-4"><div class="mb-4"><label for="name" class="block text-sm font-medium text-gray-700">Name</label> <input type="text" name="name" id="name" required class="block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div> <div class="mb-4"><label for="address" class="block text-sm font-medium text-gray-700">Address</label> <input type="text" name="address" id="address" required class="block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div> <div class="mb-4"><label for="manager" class="block text-sm font-medium text-gray-700">Manager</label> <input type="text" name="manager" id="manager" required class="block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div> <div class="mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"><button type="submit" class="inline-flex justify-center w-full px-4 py-2 text-base font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm">Save</button> <button type="button" class="inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm">Cancel</button></div></form></div></div></div></div>');function ce(u,m){var q,C,D;L(m,!0);let t=W(m,"restaurant",3,null),r=y(k(((q=t())==null?void 0:q.name)||"")),e=y(k(((C=t())==null?void 0:C.address)||"")),a=y(k(((D=t())==null?void 0:D.manager)||""));const s=X();async function c(){try{t()?await A.updateRestaurant({...t(),name:i(r),address:i(e),manager:i(a)}):await A.addRestaurant({name:i(r),address:i(e),manager:i(a)}),s("close")}catch(d){console.error("Error saving restaurant:",d)}}var f=ee(),R=o(f),E=l(o(R),4),j=o(E),g=o(j),J=o(g,!0);n(g);var p=l(g,2),P=B(()=>V(c)),b=o(p),S=l(o(b),2);x(S),n(b);var v=l(b,2),F=l(o(v),2);x(F),n(v);var h=l(v,2),T=l(o(h),2);x(T),n(h);var N=l(h,2),z=l(o(N),2);z.__click=[$,s],n(N),n(p),n(j),n(E),n(R),n(f),M(()=>I(J,t()?"Edit Restaurant":"Add New Restaurant")),H("submit",p,function(...d){var O;(O=i(P))==null||O.apply(this,d)}),_(S,()=>i(r),d=>w(r,d)),_(F,()=>i(e),d=>w(e,d)),_(T,()=>i(a),d=>w(a,d)),K(u,f),U()}G(["click"]);export{ce as R,A as r};
